<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:templates="clr-namespace:lume.Templates"
             x:Class="lume.Pages.ProfilePage"
             xmlns:st="clr-namespace:Plugin.SharedTransitions;assembly=Plugin.SharedTransitions"
             xmlns:custom="clr-namespace:lume.CustomObj">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!--Convertitori-->
            <custom:InverseBoolConverter x:Key="inverseBoolConverter"/>

            <Style TargetType="Button">
                <Setter Property="VisualStateManager.VisualStateGroups">
                    <VisualStateGroupList>
                        <VisualStateGroup>
                            <VisualState x:Name="Disabled">
                                <VisualState.StateTriggers>
                                    <StateTrigger IsActive="{Binding IsEnabled, Converter={StaticResource inverseBoolConverter}}"/>
                                </VisualState.StateTriggers>

                                <VisualState.Setters>
                                    <Setter Property="TextColor"
                                        Value="{x:StaticResource Nero}"/>
                                </VisualState.Setters>

                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </Setter>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <templates:MainPageTemplate>
        <templates:MainPageTemplate.TemplateContent>
            <AbsoluteLayout Margin="0"
                    Padding="0">

                <Grid AbsoluteLayout.LayoutBounds="0,0,1,1"
                      AbsoluteLayout.LayoutFlags="All"
                      RowDefinitions="45, 45, *"
                      ColumnDefinitions="45, *,90,*, 45"
              Margin="10,10,10,0"
              Padding="0"
              ColumnSpacing="-1"
              RowSpacing="0">

                    <AbsoluteLayout Grid.Column="0"
                            Grid.ColumnSpan="3"
                            Grid.Row="0"
                            Margin="0"
                            AbsoluteLayout.LayoutBounds="0,0,1,1"
                            AbsoluteLayout.LayoutFlags="SizeProportional">

                        <Label x:Name="ProfileName"
                           Text="Nome Cognome"
                           AbsoluteLayout.LayoutBounds="45,0.5"
                           AbsoluteLayout.LayoutFlags="YProportional"
                           />

                        <Label x:Name="BackgroundBoxView"
                           AbsoluteLayout.LayoutBounds="0,0.5,1,0.6"
                           AbsoluteLayout.LayoutFlags="YProportional,SizeProportional"
                           AnchorX="0"
                           BackgroundColor="{x:StaticResource BiancoLume}"/>
                    </AbsoluteLayout>

                    <AbsoluteLayout Grid.Column="2"
                            Grid.Row="0"
                            Grid.RowSpan="2"
                            Margin="0"
                            AbsoluteLayout.LayoutBounds="0,0,1,1"
                            AbsoluteLayout.LayoutFlags="SizeProportional">

                        <Frame x:Name="ProfileImage"
                       AbsoluteLayout.LayoutBounds="0,0,90,90"
                       Margin="0"
                       Padding="0"
                       AnchorY="0"
                       AnchorX="0.5"
                       WidthRequest="90"
                       IsClippedToBounds="true"
                       HeightRequest="90"
                       BackgroundColor="{x:StaticResource NeroLume}">

                            <Frame.Clip>
                                <EllipseGeometry RadiusX="45"
                                         RadiusY="45"
                                         Center="45,45"/>
                            </Frame.Clip>

                            <!--https://i.ebayimg.com/images/g/LEkAAOSw40pbtyrF/s-l1600.jpg-->
                            <Image Source=""
                       Margin="-20"
                       Aspect="AspectFill"/>


                        </Frame>

                        <Frame BackgroundColor="{x:StaticResource GrigioLume}"
                       AbsoluteLayout.LayoutBounds="60,65,30,30">
                            <Frame.Clip>
                                <EllipseGeometry RadiusX="15"
                                         RadiusY="15"
                                         Center="15,15"/>
                            </Frame.Clip>
                        </Frame>
                    </AbsoluteLayout>


                    <!-- Sezione immagine profilo e nome utente-->
                    <Button x:Name="ToTheLeft"
                    Text="&#xf053;"
                    FontFamily="{x:StaticResource IconSolid}"
                    TextColor="{x:StaticResource Nero}"
                    BackgroundColor="Transparent"
                    HorizontalOptions="Start"
                    Clicked="OnBackButtonCliked"
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="0"/>

                    <Button x:Name="ToTheRight" 
                    Grid.Row="0"
				    Grid.Column="4"
				    Text="&#xf054;"
                    TextColor="{x:StaticResource Nero}"
                    FontFamily="{x:StaticResource IconSolid}"
                    BackgroundColor="Transparent"
                    Margin="0"
                    TranslationX="50"/>

                    <Button x:Name="Settings" 
                    Grid.Row="0"
			        Grid.Column="4"
					Text="&#xf013;"
                    TextColor="{x:StaticResource Nero}"
                    FontFamily="{x:StaticResource IconSolid}"
                    FontSize="18"
					Clicked="OnSettingsClicked"
                    BackgroundColor="Transparent"
                    Margin="0"/>

                    <ScrollView Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="5"
                        Margin="-10,20,-10,0">


                        <StackLayout x:Name="ProfileInfoList">


                            <!-- Bottone modifica profilo -->
                            <Button HorizontalOptions="FillAndExpand"
                            Text="Modifica profilo"
                            CornerRadius="5"
                            HeightRequest="40"
                            BackgroundColor = "{x:StaticResource GrigioLume}"
                            TextColor="Black"
                            FontAttributes="Bold"
                            Clicked="OnModifyProfileClicked"/>

                            <StackLayout x:Name="InfoStack">

                                <templates:InfoView FieldName = "Nome"
                                           FieldValue = "Domenico"/>
                                <templates:InfoView 
                            FieldName = "Congome"
                            FieldValue ="Bini"/>
                                <templates:InfoView 
                            FieldName = "Email"
                            FieldValue ="domenicobini@pazzo.sgravato.it"/>

                            </StackLayout>

                        </StackLayout>

                    </ScrollView>

                </Grid>


            </AbsoluteLayout>
        </templates:MainPageTemplate.TemplateContent>
    </templates:MainPageTemplate>

</ContentPage>